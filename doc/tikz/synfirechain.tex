\documentclass[crop,tikz]{standalone}

\usepackage{svg}

\usetikzlibrary{shapes.geometric}
\usetikzlibrary{arrows.meta}
\usetikzlibrary{positioning}
\usetikzlibrary{calc}

\usepackage[outline]{contour}

\usepackage{rotating}

\begin{document}


\input{neuron.tex}

\begin{tikzpicture}[
    scale=1.,
    >=latex,
    transform shape,
]
    \useasboundingbox[fill=white] (-7, -4) rectangle (7, 4);

    \def\numNeurons{7}
    \def\axlengthA{4.2}
    \def\axlengthB{3.0}
    \def\radius{4}
    \def\scale{1.0}
    \def\halfAngleConnection{10}


    % % draw ellipse on which the neurons lie
    % \draw (0,0) ellipse (\axlengthA cm and \axlengthB cm );

    % neurons
    \foreach \i in {1,...,\numNeurons}
    {
        \pgfmathsetmacro\usedAngle{360 * \i / \numNeurons }

        \pcbNeuron{neuron-\i}{
            % [rotate around={\usedAngle:(0, 0)}] \radius, 0  % circle
            $(0,0)+(\usedAngle:\axlengthA cm and \axlengthB cm)$  % ellipse
        }{\scale}{\usedAngle + 290} ;
    }

    % connections
    \foreach \i in {1,...,\numNeurons}
    {
        \pgfmathtruncatemacro\nexts{ifthenelse(\i==\numNeurons, 1, round(\i+1))}
        \pgfmathsetmacro\angleOut{360/\numNeurons * (\i-1) + 180 - \halfAngleConnection}
        \pgfmathsetmacro\angleIn{360/\numNeurons * (\i) - 40 + \halfAngleConnection}
        \draw[connection] (neuron-\i-Db) to[out=\angleOut,in=\angleIn] (neuron-\nexts-Ab);
    }


\end{tikzpicture}
\end{document}
